BASIC - MC68000 Palo Alto Tiny Basic------------------------------------------------------------------* Programmerstellung + (C) Copyright   - Li Chen Wang    - Gordon Brandly    R.R. 2    Fort Sask., AB, Canada    T8L 2N8      - Kenneth L. Hurley    1230 W 7th #3    Eugene, OR  97402    (503) 343-7285  - Rolf Hemmerling    Erderstr.31    D30451 Hannover              West Deutschland    Tel. +49-(0)511-2102352* Diese Dokumentation  Rolf Hemmerling  Erderstr.31  D30451 Hannover            Tel. 0511-2102352  * Stand: 17.06.84,04.01.86,11.08.94------------------------------------------------------------------Das Programm laeuft auf allen RTOS-UH Systemen. Es wurdenur eine *rudimentaere* Anpassung vorgenommen. TINY BASIC ist zum Betrieb von /D1/ bzw /C1/ vorgesehen. Programmdateien werden auf einer zur Compilezeit festgelegten Platte /F0/ abgelegt.Andere BASIC-Systeme unter RTOS-UH----------------------------------1) BASIC Version 1.1 von U.Henry, (c) 1986   Der Quelltext des 40 Kbyte langen S-Records war auch zu    Beginn des PEARL-Pools nicht verfuegbar, die Anschrift des    Autors unbekannt. Die Bildschirmanpassung ist fuer den CT68000    Rechner, nicht fuer den ATARI-ST. Veroeffentlicht auf   ATARI RTOS-POOL Diskette 1.   2) PROBASIC      Fa. PDV Metzmacher u. Schroeder GmbH & Co.KG   Bruchweg 72   D4920 Lemgo   Tel. 05261-4811      BASIC-Interpreter unter RTOS-UH, der sich in seinem    Grundwortschatz am Altmeister MBASIC orientiert. Ueber   externe Module und einer Textdatei ist der Zugriff auf   spezielle Prozessperipherie sprachlich und algorithmisch   anschliessbar.      Der Interpreter haette Ende 1990 fertiggestellt sein   sollen. Ueber den Stand des Produkts ist nichts bekannt,   da die Fa. PDV die Entwicklung und den Vertrieb von   Software fuer RTOS-UH eingestellt hat. Angepeilter Preis   war : 685.00 DM.   Hinweise zur Anpassung von TINY BASIC-------------------------------------   Zum Uebersetzen benoetigt man den Assembler RTOS-ASM 4.2F oder eine neuere Version, da mehr als 6 Zeichen lange Labelnamenverwendet wurden.Unter den meisten 68000er Betriebssystemen (bzw. deren Assemblern)gibt es ein Programm- und ein Textsegment. Im Textsegment liegtbei BASIC-Interpretern der Stack und der BASIC-Programmspeicher. Der Quelltext wurde so geaendert, dass unter RTOS-UH die Daten PSP-relativ abgelegt werden, der Zugriff ist also relativ zumA5-Register bzw. mit der .X-Adressierung vorzunehmen. Die im urspruenglichen Quelltext innerhalb des Programms benutzten Register A4,A5 wurden dazu durch D5,D6 ersetzt.In der Hauptschleife CSTART wurde zwischen den LabelsST3 und ST4 ausgenutzt, dass sich bei einer MOVEAAnweisung das Statusregister nicht aendert. Durch dieErsetzung von Adress- durch Datenregister und damit dieErsetzung von MOVEA durch MOVE wurde das Retten undWiedereinsetzten des aktuellen Wertes des Statusregistersnotwendig.Bei geaenderten Zeilen wurde die Original-Zeile haeufigmit "*zzz" auskommentiert im Quelltext beibehalten.Fuer RTOS-ASM waren umfangreiche Syntax-Aenderungen notwendig.1)  TOS-ASM:  EORI   =1,CCR     RTOS-ASM: EORI.B =1,SR                2)  TOS-ASM:  SP-Zugriffe    RTOS-ASM: A7-Zugriffe3)  TOS-ASM:  DBRA    RTOS-ASM: DBF    4)  TOS-ASM:  Liederliche Wahl von MOVE bzw. MOVEA bei              Schreiben in Adressregistern    RTOS-ASM: Peinlich genaue Verwendung von MOVEA              bei Schreiben in Adressregistern5)  TOS-ASM:  Absolute Datenadressen    RTOS-ASM: A5-relative Datenadressen    6)  Konstantensymbol  "#" wurde durch "=" ersetzt,    aber aufgepasst: "'#'" ist die Format-Konstante    im Print-Statement !!!    7)  Umstellung bei Zugriff auf Konstanten: RTOS-ASM erlaubt     die Verwendung von Zeichen ('1') als Konstanten nur bei     vorheriger EQU-Zuweisung an ein Label.8)  Umstellung von CMP-Anweisungen, so dass zunaechst mit    LEA die zu vergleichende Adresse ermittelt wird.    9)  TOS-ASM:  MOVEA.L    ENDMEM.X,A7         RTOS-ASM: LEA        STACK.X,A7      10) RTOS-ASM kennt keine Arithmetik zwischen     Zeichenkonstanten und numerischen Konstanten        TOS-ASM:  DC.B       'LIS','T'+$80    RTOS-ASM: DC.B       'LIS',$54+$80   ;'T'+$8011) TOS-ASM:  BRA wird automatisch als BRA.S kodiert    RTOS-ASM: BRA wird immer als Long-Branch BRA kodiert     Nach Aufrufen der Prozedur QTSTG sind in der gegenwaertigen     Version von QTSTG nur Zwei-Byte Anweisungen erlaubt, also     *muss* dort ein kurzer Sprung stehen. 12) Tip der Fa. IEP: Datei I/O Fehlerstatus steht in    RECLEN(A1).        SCHREIBEN: CMP =0,RECLEN(A1)               BEQ FERROR                   LESEN:     CMP =0,RECLEN(A1)               BLE FERROR             13) RTOS: PEEK&POKE werden im Supervisor-Modus ausgefuehrt,    das BASIC ansonsten normal im User-Modus. Mit PEEK&POKE    ist schon jetzt ein Zugriff auf den kompletten Hauptspeicher    und damit auch auf den Adresss I/O Bereich moeglich.14) Es wurde eine TASK- und eine PROZEDUR-Version     implementiert. Extra fuer die TASK-Version wurde    eine extra Ausgabe-Prozedur OUTCH2 realisiert, bei    der die Terminalattribute von RTOS-UH auf "normal"    zurueckgesetzt werden. Es ist also auch bei Wahl    der /D1/ Dation fuer die Bildschirmausgaben direkt    nach dem Verlassen des BASIC ein Zugriff auf die    Shell mit CTRL-A moeglich.        Vorteil der TASK-Version: Klar, nur eine Datei, kann    als externes, z.Z. allerdings so nur auf Terminal /A1/    laufendes Kommando im XC-Verzeichnis abgelegt werden.     Die PEARL-Datei BASIC.S enthaelt zusaetzlich alle    aktuellen Spezifikationen von externen globalen    Symbolen, die zur Zeit unter RTOS-UH verfuegbar    sind in einer auch fuer WERUM-PEARL geeigneten Form.TODO-Liste----------    - Bereitstellen spezieller TINY BASIC Anwenderprogramme,  abgetippt aus alten Ausgaben der Zeitschriften BYTE   und DR.DOBB'S JOURNAL (LIFE,NIMM,TUERME VON HANOI...)- Benchmarks- Erweiterung zu einem echten Prozess-Basic, mit  Prozess-I/O und File-I/O. Ich wuerde mich ueber die Einsendung von TINY BASIC Beispielprogrammen sehr freuen. Die urspruengliche TOS-Version 2.0 dieser Software ist auf der  ATARI PD-Diskette 210 der V-Serie veroeffentlicht worden.       